import subprocess
import sys
import os

def run_script(script_name):
    """
    ุชุดุบู ููู ุจุงูุซูู ูุนูููุฉ ูููุตูุฉ ุชูุงููุง.
    ูุฐุง ูุณูุญ ุจุชุดุบูู ุนุฏุฉ ุจุฑุงูุฌ ูู ููุณ ุงูููุช ุฏูู ุงูุชุฃุซูุฑ ุนูู ุจุนุถูุง ุงูุจุนุถ.
    """
    print(f"๐ ุฌุงุฑู ุชุดุบูู {script_name}...")
    try:
        # ุงุณุชุฎุฏุงู sys.executable ูุถูุงู ุงุณุชุฎุฏุงู ููุณ ููุณุฑ ุจุงูุซูู
        # ุงุณุชุฎุฏุงู Popen ูุฌุนู ุงูุนูููุฉ ุบูุฑ ูุญุธูุฑุฉ (non-blocking)
        process = subprocess.Popen([sys.executable, script_name])
        print(f"โ {script_name} ุชู ุชุดุบููู ุจูุฌุงุญ (ูุนุฑู ุงูุนูููุฉ: {process.pid})")
        return process
    except FileNotFoundError:
        print(f"โ ุฎุทุฃ: ุงูููู {script_name} ุบูุฑ ููุฌูุฏ.")
        return None
    except Exception as e:
        print(f"โ ูุดู ูู ุชุดุบูู {script_name}: {e}")
        return None

if __name__ == '__main__':
    # ุงูุชุญูู ูู ูุฌูุฏ ุชููู ุงูุจูุช ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
    if not os.environ.get('TG_BOT_VISA'):
        print("ุฎุทุฃ: ูุชุบูุฑ ุงูุจูุฆุฉ TG_BOT_VISA ุบูุฑ ููุฌูุฏ.")
        sys.exit(1)

    print("========================================")
    print("   ุจุฏุก ุชุดุบูู ููููุงุช ุงูุชุทุจูู...")
    print("========================================")

    # ุชุดุบูู ุงูุจูุช (ููู visa.py)
    bot_process = run_script('visa.py')

    # ุชุดุบูู ูููุฏ ุงูุจุทุงูุงุช (ููู crvisa.py)
    generator_process = run_script('crvisa.py')

    print("\n========================================")
    print("   ุชู ุฅุทูุงู ุงูููููุงุช ุจูุฌุงุญ.")
    print("   ุงูุขู ููููู ุงุณุชุฎุฏุงู ุงูุฃูุงูุฑ ูู ุชูููุฌุฑุงู.")
    print("========================================")

    # ุงูููู ุงูุฑุฆูุณู ุงูุชูู ูููุชู ุจุนุฏ ุฅุทูุงู ุงูุนูููุงุช ุงูุฃุฎุฑู
    # ุงูุนูููุงุช ุงูุฃุฎุฑู (ุงูุจูุช ูุงููููุฏ) ุณุชุณุชูุฑ ูู ุงูุนูู ุจุดูู ูุณุชูู
    sys.exit(0)
